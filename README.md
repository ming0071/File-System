# Simulated Inode-based File System

本專案實作了一個精簡但功能完整的 **虛擬檔案系統 (Simulated File System)**。透過模擬作業系統底層的儲存管理機制，在單一的大型連續空間（Simulated Partition）中，自行維護一套獨立的檔案架構，實現了類 Unix 系統中的檔案索引與磁碟調度邏輯。

---

## 核心系統架構

整體虛擬檔案系統可分為 **磁碟管理 (Disk Management)** 與 **檔案索引 (File Indexing)** 兩大部分：

### 1. 磁碟管理系統 (Disk Management)
* **數據區塊 (Data Blocks)**：將模擬磁區劃分為固定大小（1024B）的區塊，作為資料儲存的最小單位。
* **空間狀態感知 (Bitmap)**：應用 **Block Bitmap** 機制監控區塊使用狀態。在執行寫入時，系統會掃描未分配區塊，達成即時的空間調度。
* **狀態監控 (Status)**：提供 `status` 指令，即時輸出分區大小、Inode 使用率、區塊佔用情形與剩餘空間等數據。

### 2. 檔案索引系統 (File Indexing)
* **Inode 架構**：參考類 Unix 系統，定義 `Inode` 結構記錄檔案元數據，包含名稱、類型、大小、以及指向資料區塊的起始索引。
* **樹狀層級管理**：透過指標陣列 `directory_items` 建立目錄與檔案的親緣關係，實現多層級路徑尋訪（如 `cd`, `ls`）。
* **持久化機制**：實作 **二進位序列化存檔**，將記憶體中的 Inode 樹與 Data Blocks 完整導出為 `.dump` 檔，並整合 **6 位數密碼校驗** 確保資料安全性。



---

## 技術實作與比較

在開發過程中，針對檔案系統的運算效率與安全性進行了以下技術處理與比較：

* **分配策略比較**：採用 **連續分配 (Consecutive Allocation)** 策略。相較於鏈結分配，本系統在執行 `cat` 讀取時能減少尋道次數，提升讀取連續性。
* **目錄管理邏輯**：對比了固定大小與 **動態分配**。本專案選擇以 `realloc` 動態擴充目錄項目的指標陣列，確保在不同規模的目錄層級下都能維持記憶體使用效率。
* **數據交互機制**：除了虛擬系統內的 CRUD 操作，特別開發了 `put` 與 `get` 指令，實作了實體作業系統與虛擬磁區之間的資料封裝與拆解邏輯。

---

## 指令集 (List of Commands)

| 指令 | 說明 |
| :--- | :--- |
| `ls` | 列出當前目錄下的檔案與子目錄（藍色為目錄，白色為檔案） |
| `cd` | 切換當前工作目錄 |
| `mkdir` / `rmdir` | 建立或刪除目錄（支援子項目清空） |
| `touch` / `rm` | 建立空檔案或刪除特定檔案 |
| `put` / `get` | 將實體檔案放入虛擬空間，或取出至 `dump/` 資料夾 |
| `cat` | 在終端機輸出虛擬檔案內容 |
| `status` | 顯示當前分區、Inode 與 Block 的詳細狀態 |
| `exit` | 輸入密碼後加密儲存系統狀態並退出 |

---

## 快速開始

### 1. 編譯專案
```bash
gcc file_system.c -o file_system